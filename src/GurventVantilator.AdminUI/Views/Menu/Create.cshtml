@model GurventVantilator.Application.DTOs.MenuDto

@{
    ViewData["Title"] = "Menü Ekle";
}

<form class="ecommerce-form action-buttons-fixed" asp-action="Create" method="post">
    <div class="row mt-2">
        <div class="col">
            <section class="card card-modern card-big-info">
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-2-5 col-xl-1-5">
                            <i class="card-big-info-icon bx bx-menu"></i>
                            <h2 class="card-big-info-title">Menü Ekle</h2>
                            <p class="card-big-info-desc">Menü eklemek için bilgileri doldurun.</p>
                        </div>
                        <div class="col-lg-3-5 col-xl-4-5">

                            <div class="form-group row align-items-center pb-3">
                                <label class="col-lg-5 col-xl-3 control-label text-lg-end mb-0"
                                    asp-for="Title">Başlık</label>
                                <div class="col-lg-7 col-xl-6">
                                    <input type="text" class="form-control form-control-modern" asp-for="Title" />
                                    <span asp-validation-for="Title" class="badge badge-danger"></span>
                                </div>
                            </div>

                            <div class="form-group row align-items-center pb-3">
                                <label class="col-lg-5 col-xl-3 control-label text-lg-end mb-0" asp-for="LinkType">Link
                                    Tipi</label>
                                <div class="col-lg-7 col-xl-6">
                                    <select asp-for="LinkType" class="form-control populate" data-plugin-selectTwo
                                        asp-items="ViewBag.LinkTypes">
                                        <option value="">Seçim Yapınız</option>
                                    </select>
                                    <span asp-validation-for="LinkType" class="badge badge-danger"></span>
                                </div>
                            </div>

                            <div class="form-group row align-items-center pb-3">
                                <label class="col-lg-5 col-xl-3 control-label text-lg-end mb-0" asp-for="ParentId">Üst
                                    Menü</label>
                                <div class="col-lg-7 col-xl-6">
                                    <select asp-for="ParentId" class="form-control populate" data-plugin-selectTwo
                                        asp-items="ViewBag.Menus">
                                        <option value="">(Ana Menü)</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group row align-items-center pb-3" id="serviceWrapper"
                                style="display:none;">
                                <label class="col-lg-5 col-xl-3 control-label text-lg-end mb-0"
                                    asp-for="ServiceId">Hizmet</label>
                                <div class="col-lg-7 col-xl-6">
                                    <select asp-for="ServiceId" class="form-control populate" data-plugin-selectTwo
                                        asp-items="ViewBag.Services">
                                        <option value="">Seçim Yapınız</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group row align-items-center pb-3" id="projectWrapper"
                                style="display:none;">
                                <label class="col-lg-5 col-xl-3 control-label text-lg-end mb-0"
                                    asp-for="ProjectId">Proje</label>
                                <div class="col-lg-7 col-xl-6">
                                    <select asp-for="ProjectId" class="form-control populate" data-plugin-selectTwo
                                        asp-items="ViewBag.Projects">
                                        <option value="">Seçim Yapınız</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group row align-items-center pb-3" id="productWrapper"
                                style="display:none;">
                                <label class="col-lg-5 col-xl-3 control-label text-lg-end mb-0"
                                    asp-for="ProductId">Ürünler</label>
                                <div class="col-lg-7 col-xl-6">
                                    <select asp-for="ProductId" class="form-control populate"
                                        data-plugin-selectTwo asp-items="ViewBag.Products">
                                        <option value="">Seçim Yapınız</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group row align-items-center pb-3" id="productCategoryWrapper"
                                style="display:none;">
                                <label class="col-lg-5 col-xl-3 control-label text-lg-end mb-0"
                                    asp-for="ProductCategoryId">Ürün Kategorisi</label>
                                <div class="col-lg-7 col-xl-6">
                                    <select asp-for="ProductCategoryId" class="form-control populate"
                                        data-plugin-selectTwo asp-items="ViewBag.ProductCategories">
                                        <option value="">Seçim Yapınız</option>
                                    </select>
                                </div>
                            </div>


                            <div class="form-group row align-items-center pb-3">
                                <label class="col-lg-5 col-xl-3 control-label text-lg-end mb-0"
                                    asp-for="Order">Sıra</label>
                                <div class="col-lg-7 col-xl-6">
                                    <input type="number" class="form-control form-control-modern" asp-for="Order" />
                                    <span asp-validation-for="Order" class="badge badge-danger"></span>
                                </div>
                            </div>

                            <div class="form-group row align-items-center pb-3">
                                <label class="col-lg-5 col-xl-3 control-label text-lg-end mb-0" asp-for="IsActive">Aktif
                                    mi?</label>
                                <div class="col-lg-7 col-xl-6">
                                    <input asp-for="IsActive" class="form-check-input" type="checkbox" />
                                </div>
                            </div>

                            <div class="form-group row align-items-center pb-3" id="contentHtmlWrapper"
                                style="display:none;">
                                <label class="col-lg-5 col-xl-3 control-label text-lg-end mb-0"
                                    asp-for="ContentHtml">İçerik</label>
                                <div class="col-lg-7 col-xl-6">
                                    <textarea asp-for="ContentHtml" class="summernote" data-plugin-summernote
                                        data-plugin-options='{ "height": 180 }'></textarea>
                                    <span asp-validation-for="ContentHtml" class="badge badge-danger"></span>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <div class="row action-buttons">
        <div class="col-12 col-md-auto">
            <button type="submit"
                class="submit-button btn btn-primary btn-px-4 py-3 d-flex align-items-center font-weight-semibold line-height-1"
                data-loading-text="Loading...">
                <i class="bx bx-save text-4 me-2"></i> Kaydet
            </button>
        </div>
        <div class="col-12 col-md-auto px-md-0 mt-3 mt-md-0">
            <a asp-action="Index"
                class="cancel-button btn btn-light btn-px-4 py-3 border font-weight-semibold text-color-dark text-3">
                Geri Dön
            </a>
        </div>
    </div>
</form>

@section Scripts {
    <script>
        $(document).ready(function () {
            function toggleContentEditor() {
                var linkType = $("#LinkType").val();
                if (linkType === "0") { // 0 = CustomPage
                    $("#contentHtmlWrapper").show();
                } else {
                    $("#contentHtmlWrapper").hide();
                }
            }

            $("#LinkType").change(toggleContentEditor);
            toggleContentEditor();
        });
    </script>

    <script>
        $(document).ready(function () {
            function toggleInputs() {
                var linkType = $("#LinkType").val();
                $("#contentHtmlWrapper").hide();
                $("#serviceWrapper").hide();
                $("#projectWrapper").hide();

                if (linkType === "0") { // CustomPage
                    $("#contentHtmlWrapper").show();
                }
                else if (linkType === "1") { // Service
                    $("#serviceWrapper").show();
                }
                else if (linkType === "2") { // Project
                    $("#projectWrapper").show();
                }
                else if (linkType === "7") { // Product
                    $("#productWrapper").show();
                }
                else if (linkType === "8") { // ProductCategory
                    $("#productCategoryWrapper").show();
                }
            }

            $("#LinkType").change(toggleInputs);
            toggleInputs();
        });
    </script>
}